from glob import glob
from os.path import basename
from os import system
import pandas as pd

configfile: "config/config.yaml"

sampleinfo = pd.read_table(config["sampleTable"])
SAMPLES=list(sampleinfo.loc[:,"sampleid"])


if config["aligner"] in ["STAR","star"]:
    system("mkdir -p star2ndpass/tmp")


#rule all:
#    input:
#        expand("star2ndpass/sorted_{sample}_STAR2ndpassAligned.out.bam",sample=SAMPLES)
#    default_target: True


rule all:
    input:
        expand("stringtie/{sample}_stringtie.gtf",sample=SAMPLES)    
    default_target: True


#rule all:
#    input:
#        "stringtie_merged/stringtie-star_merge.gtf"

include: "rules/star.smk"
include: "rules/stringtie.smk"
